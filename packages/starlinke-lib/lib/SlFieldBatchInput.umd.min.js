/* * Copyright © 2020-2021 wlei * Released under the MIT License. */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).SlFieldBatchInput=n()}(this,(function(){"use strict";var e={name:"SkuBatchDialog",props:{maxLen:{type:Number,default:200},label:{type:String,default:""},labelWidth:{type:String,default:"80px"}},data:function(){return{visible:!1,skuCodes:""}},methods:{show:function(e){this.visible=!0,this.skuCodes=e},onSubmitBtn:function(){var e=this.skuCodes,n="";if(e&&e.trim()){var t=e.split(/\r\n|[\r\n]/).join(",").split(",").filter((function(e){return e&&e.trim()}));t.forEach((function(e,n){t[n]=e.trim()})),t.length>this.maxLen&&(this.$message.warning("超出允许输入最大数量".concat(this.maxLen,"个，已自动截取！")),t.length=this.maxLen),n=t.join(",")}this.visible=!1,this.$emit("submit",n)}}};function n(e,n,t,i,s,o,r,a,l,u){"boolean"!=typeof r&&(l=a,a=r,r=!1); var d="function"==typeof t?t.options:t;let c;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,s&&(d.functional=!0)),i&&(d._scopeId=i),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=c):n&&(c=r?function(e){n.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,a(e))}),c)if(d.functional){ var e=d.render;d.render=function(n,t){return c.call(t),e(n,t)}}else{ var e=d.beforeCreate;d.beforeCreate=e?[].concat(e,c):[c]}return t} var t="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function i(e){return(e,n)=>function(e,n){ var i=t?n.media||"default":e,r=o[i]||(o[i]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",n.media&&r.element.setAttribute("media",n.media),void 0===s&&(s=document.head||document.getElementsByTagName("head")[0]),s.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(t),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{ var e=r.ids.size-1,n=document.createTextNode(t),i=r.element.childNodes;i[e]&&r.element.removeChild(i[e]),i.length?r.element.insertBefore(n,i[e]):r.element.appendChild(n)}}}(e,n)}let s; var o={}; var r=e;var a=function(){var e=this,n=this,t=n.$createElement,i=n._self._c||t;return i("div",[i("el-dialog",{attrs:{"lock-scroll":!1,title:"批量查询"+n.label,visible:n.visible,"close-on-click-modal":!1,"append-to-body":!0,width:"800px"},on:{"update:visible":function(e){n.visible=e}}},[i("el-form",{ref:"form",attrs:{"label-width":n.labelWidth}},[i("el-form-item",{attrs:{label:n.label}},[i("el-input",{attrs:{placeholder:"请输入"+n.label,autosize:{minRows:10},clearable:"",type:"textarea"},on:{input:function(){e.$forceUpdate()}},model:{value:n.skuCodes,callback:function(e){n.skuCodes=e},expression:"skuCodes"}})],1),n._v(" "),i("el-form-item",[i("div",{staticStyle:{"font-size":"14px",color:"#666"}},[n._v("\n          备注：一行一个，或英文逗号分隔，最多支持"+n._s(n.maxLen)+"个批量搜索\n        ")])]),n._v(" "),i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:n.onSubmitBtn}},[n._v("\n          确定\n        ")]),n._v(" "),i("el-button",{on:{click:function(e){n.visible=!1}}},[n._v("\n          取消\n        ")])],1)],1)],1)],1)};a._withStripped=!0; var l={name:"SlFieldBatchInput",components:{SkuBatchDialog:n({render:a,staticRenderFns:[]},(function(e){e&&e("data-v-44adbeb0_0",{source:"\n\n/*# sourceMappingURL=skuBatchDialog.vue.map */",map:{version:3,sources:["skuBatchDialog.vue"],names:[],mappings:";;AAEA,6CAA6C",file:"skuBatchDialog.vue"},media:void 0})}),r,"data-v-44adbeb0",!1,void 0,!1,i,void 0,void 0)},model:{prop:"skuCodes",event:"confirm"},props:{skuCodes:{type:String,default:""},maxLen:{type:Number,default:200},label:{type:String,default:"SKU"},width:{type:Number,default:0},showBatchButton:{type:Boolean,default:!0}},data:function(){return{skuCodesCopy:"",multipleSkuVisible:!1}},watch:{skuCodes:function(e){this.skuCodesCopy=e}},methods:{handleInput:function(e){this.skuCodesCopy=this.formatLen(this.skuCodesCopy),this.onEmit(this.skuCodesCopy)},multipleSku:function(){this.disabled||this.$refs.skuBatchDialog.show(this.skuCodesCopy)},onSubmit:function(e){this.onEmit(e)},onEmit:function(e){this.$emit("confirm",e)},formatLen:function(e){var n=e.split(",");return n.length>this.maxLen?(this.$message.warning("超出允许输入最大数量".concat(this.maxLen,"个，已自动截取！")),n.length=this.maxLen,n.join(",")):e}}};var u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"sku-container",style:{width:e.width?e.width+"px":"100%"}},[t("el-input",{ref:"input",attrs:{placeholder:"请输入"+e.label,clearable:""},on:{input:e.handleInput},model:{value:e.skuCodesCopy,callback:function(n){e.skuCodesCopy=n},expression:"skuCodesCopy"}},[e.showBatchButton?t("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.multipleSku},slot:"append"},[e._v("\n      批量\n    ")]):e._e()],1),e._v(" "),t("SkuBatchDialog",e._b({ref:"skuBatchDialog",attrs:{maxLen:e.maxLen,label:e.label},on:{submit:e.onSubmit}},"SkuBatchDialog",e.$attrs,!1))],1)};u._withStripped=!0; var d=n({render:u,staticRenderFns:[]},(function(e){e&&e("data-v-324c277e_0",{source:".sku-container[data-v-324c277e] {\n  display: inline-block;\n}\n\n/*# sourceMappingURL=main.vue.map */",map:{version:3,sources:["E:\\code\\font-code\\lerna-repo\\packages\\starlinke-lib\\packages\\SlFieldBatchInput\\src\\main.vue","main.vue"],names:[],mappings:"AAyGA;EACA,qBAAA;ACxGA;;AAEA,mCAAmC",file:"main.vue",sourcesContent:['<template>\r\n  <div\r\n    class="sku-container"\r\n    :style="{ width: width ? width + \'px\' : \'100%\' }"\r\n  >\r\n    <el-input\r\n      ref="input"\r\n      v-model="skuCodesCopy"\r\n      :placeholder="`请输入${label}`"\r\n      clearable\r\n      @input="handleInput"\r\n    >\r\n      <el-button\r\n        v-if="showBatchButton"\r\n        slot="append"\r\n        type="primary"\r\n        @click="multipleSku"\r\n      >\r\n        批量\r\n      </el-button>\r\n    </el-input>\r\n    <SkuBatchDialog\r\n      ref="skuBatchDialog"\r\n      :maxLen="maxLen"\r\n      :label="label"\r\n      v-bind="$attrs"\r\n      @submit="onSubmit"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SkuBatchDialog from \'./skuBatchDialog\'\r\n\r\nexport default {\r\n  name: \'SlFieldBatchInput\',\r\n  components: {\r\n    SkuBatchDialog\r\n  },\r\n  model: {\r\n    prop: \'skuCodes\',\r\n    event: \'confirm\'\r\n  },\r\n  props: {\r\n    skuCodes: {\r\n      type: String,\r\n      default: \'\'\r\n    },\r\n    maxLen: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: \'SKU\'\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    showBatchButton: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      skuCodesCopy: \'\',\r\n      multipleSkuVisible: false\r\n    }\r\n  },\r\n  watch: {\r\n    skuCodes(val) {\r\n      this.skuCodesCopy = val\r\n    }\r\n  },\r\n  methods: {\r\n    handleInput(value) {\r\n      this.skuCodesCopy = this.formatLen(this.skuCodesCopy)\r\n      this.onEmit(this.skuCodesCopy)\r\n    },\r\n    multipleSku() {\r\n      if (this.disabled) return\r\n      this.$refs.skuBatchDialog.show(this.skuCodesCopy)\r\n    },\r\n    onSubmit(skucode) {\r\n      this.onEmit(skucode)\r\n    },\r\n    onEmit(skuCodes) {\r\n      this.$emit(\'confirm\', skuCodes)\r\n    },\r\n    formatLen(skuCodes) {\r\n      let skuArr = skuCodes.split(\',\')\r\n      if (skuArr.length > this.maxLen) {\r\n        this.$message.warning(`超出允许输入最大数量${this.maxLen}个，已自动截取！`)\r\n        skuArr.length = this.maxLen\r\n        return skuArr.join(\',\')\r\n      }\r\n      return skuCodes\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style lang="scss" scoped>\r\n.sku-container {\r\n  display: inline-block;\r\n}\r\n</style>\r\n',".sku-container {\n  display: inline-block;\n}\n\n/*# sourceMappingURL=main.vue.map */"]},media:void 0})}),l,"data-v-324c277e",!1,void 0,!1,i,void 0,void 0);return d.install=function(e){e.component(d.name,d)},d}));
