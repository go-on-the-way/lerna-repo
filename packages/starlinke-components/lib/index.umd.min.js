/* * Copyright © 2020-2021 wlei * Released under the MIT License. */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("starlinke-utils")):"function"==typeof define&&define.amd?define(["starlinke-utils"],e):(t=t||self).index=e(t.starlinkeUtils)}(this,(function(t){"use strict";var e={name:"SlPoper",props:{position:{type:String,default:"top"},styleSetting:{type:Object,default:function(){return{}}},offset:{type:Number,default:10},trigger:{type:String,default:"mouseover"},showPoper:{type:Boolean,default:!0}},data:function(){return{styleObj:{visibility:"hidden"},arrowStyleObj:{visibility:"hidden"},timer:null,isMouseOnPoper:!1}},computed:{},mounted:function(){var t=this,e=this.$refs.pop,n=this.$refs.slpopper;this.getParentDoms(n).forEach((function(e){e.addEventListener("scroll",(function(){"visible"===t.styleObj.visibility&&t.isMouseOnPoper&&t.setPopStyle()}))})),"click"===this.trigger&&document.addEventListener("click",(function(e){var r=t.getParentDoms(e.target);r.unshift(e.target);for(var o=!0,i=0;i<r.length;i++)if(r[i]===n){o=!1;break}o&&t.removeStyle()})),"mouseover"===this.trigger&&(n.addEventListener("mouseout",(function(e){e.stopPropagation(),t.mouseOut()})),e.addEventListener("mouseout",(function(e){e.stopPropagation(),t.mouseOut()})))},methods:{mouseOn:function(){this.showPoper&&(this.isMouseOnPoper=!0,this.setPopStyle())},mouseOut:function(){this.showPoper&&(this.isMouseOnPoper=!1,this.removeStyle())},setPopStyle:function(){this.timer&&clearTimeout(this.timer);var t=this.position,e={},n=this.styleSetting,r=n.color,o=void 0===r?"black":r,i=n.border,s=void 0===i?"none":i,a=n.borderRadius,l=void 0===a?"6px":a,p=n.boxShadow,d=void 0===p?"0 0 10px #d6d6d6":p,c=n.background,u=void 0===c?"white":c,h=document.documentElement.clientHeight||document.body.clientHeight,m=document.documentElement.clientWidth||document.body.clientWidth,f=this.$refs.pop.getBoundingClientRect(),b=f.height,g=f.width,v=this.$refs.slpopper.getBoundingClientRect(),y=v.left,k=v.right,A=v.top,C=v.bottom,w=v.height,x=v.width;t=this.reSetPosition(t,g,y,k,b,C,A,h,m),e.color=o,e.border=s,e.borderRadius=l,e.boxShadow=d,e.background=u;var S=this.getObjPosition(h,m,t,A,w,y,x,b,g);this.styleObj=Object.assign({visibility:"visible"},e,S);var O=this.$refs.arrow.getBoundingClientRect(),j=O.height,P=O.width,B=this.getObjPosition(h,m,t,A,w,y,x,j,P);switch(t){case"left":B.transform="translateX(50%) rotate(45deg)",B.borderTop="".concat(s),B.borderRight="".concat(s);break;case"right":B.transform="translateX(-50%) rotate(45deg)",B.borderLeft="".concat(s),B.borderBottom="".concat(s);break;case"top":B.transform="translateY(50%) rotate(45deg)",B.borderBottom="".concat(s),B.borderRight="".concat(s);break;case"bottom":B.transform="translateY(-50%) rotate(45deg)",B.borderTop="".concat(s),B.borderLeft="".concat(s)}B.background=u,this.arrowStyleObj=B},reSetPosition:function(t,e,n,r,o,i,s,a,l){return"left"===t&&e+this.offset>n&&(t="right"),"right"===t&&r+e+this.offset>l&&(t="left"),"top"===t&&o+this.offset>s&&(t="bottom"),"bottom"===t&&i+o+this.offset>a&&(t="top"),t},getObjPosition:function(t,e,n,r,o,i,s,a,l){var p,d=r-a/2+o/2,c=d<=0?0:d>t-a?t-a:d,u=e-i+this.offset,h={right:(u<=0?0:u)+"px",top:c+"px"},m=i+s+this.offset,f={left:(m<=0?0:m)+"px",top:c+"px"},b=i-l/2+s/2,g=b<=0?0:b>e-l?e-l:b,v=t-r+this.offset,y={bottom:(v<=0?0:v)+"px",left:g+"px"},k=r+o+this.offset,A={top:(k<=0?0:k)+"px",left:g+"px"};switch(n){case"left":p=h;break;case"right":p=f;break;case"top":p=y;break;case"bottom":p=A;break;default:p={}}return p},removeStyle:function(){var t=this;this.timer=setTimeout((function(){t.styleObj=Object.assign({},t.styleObj,{visibility:"hidden"}),t.arrowStyleObj=Object.assign({},t.arrowStyleObj,{visibility:"hidden"})}),100)},getParentDoms:function(t){for(var e=t.parentNode,n=[];null!==e;)n.push(e),e=e.parentNode;return n}}};function n(t,e,n,r,o,i,s,a,l,p){"boolean"!=typeof s&&(l=a,a=s,s=!1); var d="function"==typeof n?n.options:n;let c;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),r&&(d._scopeId=r),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},d._ssrRegister=c):e&&(c=s?function(t){e.call(this,p(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),c)if(d.functional){ var t=d.render;d.render=function(e,n){return c.call(n),t(e,n)}}else{ var t=d.beforeCreate;d.beforeCreate=t?[].concat(t,c):[c]}return n} var r="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function o(t){return(t,e)=>function(t,e){ var n=r?e.media||"default":t,o=s[n]||(s[n]={ids:new Set,styles:[]});if(!o.ids.has(t)){o.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",e.media&&o.element.setAttribute("media",e.media),void 0===i&&(i=document.head||document.getElementsByTagName("head")[0]),i.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(n),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{ var t=o.ids.size-1,e=document.createTextNode(n),r=o.element.childNodes;r[t]&&o.element.removeChild(r[t]),r.length?o.element.insertBefore(e,r[t]):o.element.appendChild(e)}}}(t,e)}let i; var s={}; var a=e;var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"slpopper",staticClass:"sl-popper",on:t._d({},[t.trigger,function(e){return t.mouseOn(e)}])},[n("div",{ref:"pop",staticClass:"pop",style:t.styleObj,on:t._d({},[t.trigger,function(e){return e.stopPropagation(),t.mouseOn(e)}])},[t._t("pop")],2),t._v(" "),n("div",{ref:"arrow",staticClass:"arrow",style:t.arrowStyleObj}),t._v(" "),t._t("default")],2)};l._withStripped=!0; var p=n({render:l,staticRenderFns:[]},(function(t){t&&t("data-v-54301b32_0",{source:".sl-popper[data-v-54301b32] {\n  display: inline-block;\n}\n.sl-popper .pop[data-v-54301b32] {\n  display: table;\n  position: fixed;\n  z-index: 9999;\n  padding: 10px;\n  user-select: text;\n}\n.sl-popper .arrow[data-v-54301b32] {\n  display: table;\n  position: fixed;\n  z-index: 9999;\n  width: 8px;\n  height: 8px;\n  transform-origin: center center;\n}\n\n/*# sourceMappingURL=main.vue.map */",map:{version:3,sources:["E:\\code\\font-code\\lerna-repo\\packages\\starlinke-components\\packages\\poper\\src\\main.vue","main.vue"],names:[],mappings:"AA4QA;EACA,qBAAA;AC3QA;AD4QA;EACA,cAAA;EACA,eAAA;EACA,aAAA;EACA,aAAA;EACA,iBAAA;AC1QA;AD4QA;EACA,cAAA;EACA,eAAA;EACA,aAAA;EACA,UAAA;EACA,WAAA;EACA,+BAAA;AC1QA;;AAEA,mCAAmC",file:"main.vue",sourcesContent:["<template>\r\n  <div\r\n    ref=\"slpopper\"\r\n    class=\"sl-popper\"\r\n    @[trigger]=\"mouseOn($event)\"\r\n  >\r\n    <div\r\n      ref=\"pop\"\r\n      class=\"pop\"\r\n      :style=\"styleObj\"\r\n      @[trigger].stop=\"mouseOn\"\r\n    >\r\n      <slot name=\"pop\" />\r\n    </div>\r\n\r\n    <div\r\n      ref=\"arrow\"\r\n      class=\"arrow\"\r\n      :style=\"arrowStyleObj\"\r\n    />\r\n    <slot />\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'SlPoper',\r\n  props: {\r\n    position: {\r\n      type: String,\r\n      default: 'top' // top,left,bottom,right\r\n    },\r\n    styleSetting: {\r\n      // 样式设置，如：{ borderRadius = '6px', background = 'white' }\r\n      type: Object,\r\n      default: function() {\r\n        return {}\r\n      }\r\n    },\r\n    offset: {\r\n      // 气泡的偏移值\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    trigger: {\r\n      type: String,\r\n      default: 'mouseover' // mouseover,click\r\n    },\r\n    showPoper: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      styleObj: { visibility: 'hidden' },\r\n      arrowStyleObj: { visibility: 'hidden' },\r\n      timer: null,\r\n      isMouseOnPoper: false\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n    let popDom = this.$refs.pop\r\n    let slPoperDom = this.$refs.slpopper\r\n\r\n    let parentDoms = this.getParentDoms(slPoperDom)\r\n    parentDoms.forEach((p) => {\r\n      p.addEventListener('scroll', () => {\r\n        if (this.styleObj.visibility === 'visible' && this.isMouseOnPoper) {\r\n          this.setPopStyle()\r\n        }\r\n      })\r\n    })\r\n    if (this.trigger === 'click') {\r\n      document.addEventListener('click', (e) => {\r\n        let parents = this.getParentDoms(e.target)\r\n        parents.unshift(e.target)\r\n        let canRemove = true\r\n        for (let i = 0; i < parents.length; i++) {\r\n          if (parents[i] === slPoperDom) {\r\n            canRemove = false\r\n            break\r\n          }\r\n        }\r\n        if (canRemove) this.removeStyle()\r\n      })\r\n    }\r\n    if (this.trigger === 'mouseover') {\r\n      slPoperDom.addEventListener('mouseout', (e) => {\r\n        e.stopPropagation()\r\n        this.mouseOut()\r\n      })\r\n      popDom.addEventListener('mouseout', (e) => {\r\n        e.stopPropagation()\r\n        this.mouseOut()\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    // 求取popper的位置\r\n    mouseOn() {\r\n      if (!this.showPoper) return\r\n      this.isMouseOnPoper = true\r\n      this.setPopStyle()\r\n    },\r\n    mouseOut() {\r\n      if (!this.showPoper) return\r\n      this.isMouseOnPoper = false\r\n      this.removeStyle()\r\n    },\r\n    setPopStyle() {\r\n      if (this.timer) clearTimeout(this.timer)\r\n      let position = this.position\r\n      let style = {}\r\n      let {\r\n        color = 'black',\r\n        border = 'none',\r\n        borderRadius = '6px',\r\n        boxShadow = '0 0 10px #d6d6d6',\r\n        background = 'white'\r\n      } = this.styleSetting\r\n\r\n      // 获取视窗宽、高\r\n      let ch = document.documentElement.clientHeight || document.body.clientHeight\r\n      let cw = document.documentElement.clientWidth || document.body.clientWidth\r\n      // 获取气泡的宽、高\r\n      let popDom = this.$refs.pop\r\n      let { height: popH, width: popW } = popDom.getBoundingClientRect()\r\n      // 获取content内容区的信息\r\n      let slPoperDom = this.$refs.slpopper\r\n      let slPoperDomRect = slPoperDom.getBoundingClientRect()\r\n      let {\r\n        left: rectL,\r\n        right: rectR,\r\n        top: rectT,\r\n        bottom: rectB,\r\n        height: rectH,\r\n        width: rectW\r\n      } = slPoperDomRect\r\n\r\n      // 设置气泡的显示方位\r\n      position = this.reSetPosition(position, popW, rectL, rectR, popH, rectB, rectT, ch, cw)\r\n\r\n      style.color = color\r\n      style.border = border\r\n      style.borderRadius = borderRadius\r\n      style.boxShadow = boxShadow\r\n      style.background = background\r\n      // 获取气泡的fixed定位的位置 top,left,right,bottom\r\n      let pObj = this.getObjPosition(ch, cw, position, rectT, rectH, rectL, rectW, popH, popW)\r\n      this.styleObj = Object.assign({ visibility: 'visible' }, style, pObj)\r\n\r\n      // 获取箭头的宽、高\r\n      let arrowDom = this.$refs.arrow\r\n      let { height: arrowH, width: arrowW } = arrowDom.getBoundingClientRect()\r\n      // 获取气泡的fixed定位的位置 top,left,right,bottom\r\n      let aObj = this.getObjPosition(ch, cw, position, rectT, rectH, rectL, rectW, arrowH, arrowW)\r\n      switch (position) {\r\n        case 'left':\r\n          aObj.transform = 'translateX(50%) rotate(45deg)'\r\n          aObj.borderTop = `${border}`\r\n          aObj.borderRight = `${border}`\r\n          break\r\n        case 'right':\r\n          aObj.transform = 'translateX(-50%) rotate(45deg)'\r\n          aObj.borderLeft = `${border}`\r\n          aObj.borderBottom = `${border}`\r\n          break\r\n        case 'top':\r\n          aObj.transform = 'translateY(50%) rotate(45deg)'\r\n          aObj.borderBottom = `${border}`\r\n          aObj.borderRight = `${border}`\r\n          break\r\n        case 'bottom':\r\n          aObj.transform = 'translateY(-50%) rotate(45deg)'\r\n          aObj.borderTop = `${border}`\r\n          aObj.borderLeft = `${border}`\r\n          break\r\n        default:\r\n          break\r\n      }\r\n      aObj.background = background\r\n      this.arrowStyleObj = aObj\r\n    },\r\n\r\n    // 设置气泡的显示方位\r\n    reSetPosition(position, popW, rectL, rectR, popH, rectB, rectT, ch, cw) {\r\n      if (position === 'left' && popW + this.offset > rectL) {\r\n        position = 'right'\r\n      }\r\n      if (position === 'right' && rectR + popW + this.offset > cw) {\r\n        position = 'left'\r\n      }\r\n      if (position === 'top' && popH + this.offset > rectT) {\r\n        position = 'bottom'\r\n      }\r\n      if (position === 'bottom' && rectB + popH + this.offset > ch) {\r\n        position = 'top'\r\n      }\r\n      return position\r\n    },\r\n\r\n    // 获取气泡和箭头的fixed定位的位置，气泡必须始终显示在视窗内\r\n    getObjPosition(ch, cw, position, rectT, rectH, rectL, rectW, popH, popW) {\r\n      // Y轴偏移量\r\n      let ty = rectT - popH / 2 + rectH / 2\r\n      let py = ty <= 0 ? 0 : ty > ch - popH ? ch - popH : ty\r\n      // 在左侧显示\r\n      let or = cw - rectL + this.offset\r\n      let pLeft = { right: (or <= 0 ? 0 : or) + 'px', top: py + 'px' }\r\n      // 在右侧显示\r\n      let ol = rectL + rectW + this.offset\r\n      let pRight = { left: (ol <= 0 ? 0 : ol) + 'px', top: py + 'px' }\r\n\r\n      // X轴偏移量\r\n      let tx = rectL - popW / 2 + rectW / 2\r\n      let px = tx <= 0 ? 0 : tx > cw - popW ? cw - popW : tx\r\n      // 在上方显示\r\n      let ob = ch - rectT + this.offset\r\n      let pTop = { bottom: (ob <= 0 ? 0 : ob) + 'px', left: px + 'px' }\r\n      // 在下方显示\r\n      let ot = rectT + rectH + this.offset\r\n      let pBottom = { top: (ot <= 0 ? 0 : ot) + 'px', left: px + 'px' }\r\n\r\n      let pObj\r\n\r\n      switch (position) {\r\n        case 'left':\r\n          pObj = pLeft\r\n          break\r\n        case 'right':\r\n          pObj = pRight\r\n          break\r\n        case 'top':\r\n          pObj = pTop\r\n          break\r\n        case 'bottom':\r\n          pObj = pBottom\r\n          break\r\n        default:\r\n          pObj = {}\r\n          break\r\n      }\r\n\r\n      return pObj\r\n    },\r\n\r\n    // 鼠标移出后，隐藏气泡和箭\r\n    removeStyle() {\r\n      this.timer = setTimeout(() => {\r\n        this.styleObj = Object.assign({}, this.styleObj, { visibility: 'hidden' })\r\n        this.arrowStyleObj = Object.assign({}, this.arrowStyleObj, { visibility: 'hidden' })\r\n      }, 100)\r\n    },\r\n\r\n    getParentDoms(element) {\r\n      let current = element.parentNode\r\n      let parentDoms = []\r\n      while (current !== null) {\r\n        parentDoms.push(current)\r\n        current = current.parentNode\r\n      }\r\n      return parentDoms\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n<style lang=\"scss\" scoped>\r\n.sl-popper {\r\n  display: inline-block;\r\n  .pop {\r\n    display: table;\r\n    position: fixed;\r\n    z-index: 9999;\r\n    padding: 10px;\r\n    user-select: text;\r\n  }\r\n  .arrow {\r\n    display: table;\r\n    position: fixed;\r\n    z-index: 9999;\r\n    width: 8px;\r\n    height: 8px;\r\n    transform-origin: center center;\r\n  }\r\n}\r\n</style>\r\n",".sl-popper {\n  display: inline-block;\n}\n.sl-popper .pop {\n  display: table;\n  position: fixed;\n  z-index: 9999;\n  padding: 10px;\n  user-select: text;\n}\n.sl-popper .arrow {\n  display: table;\n  position: fixed;\n  z-index: 9999;\n  width: 8px;\n  height: 8px;\n  transform-origin: center center;\n}\n\n/*# sourceMappingURL=main.vue.map */"]},media:void 0})}),a,"data-v-54301b32",!1,void 0,!1,o,void 0,void 0);p.install=function(t){t.component(p.name,p)}; var d={name:"SkuBatchDialog",props:{maxLen:{type:Number,default:200},label:{type:String,default:""},labelWidth:{type:String,default:"80px"}},data:function(){return{visible:!1,skuCodes:""}},methods:{show:function(t){this.visible=!0,this.skuCodes=t},onSubmitBtn:function(){var t=this.skuCodes,e="";if(t&&t.trim()){var n=t.split(/\r\n|[\r\n]/).join(",").split(",").filter((function(t){return t&&t.trim()}));n.forEach((function(t,e){n[e]=t.trim()})),n.length>this.maxLen&&(this.$message.warning("超出允许输入最大数量".concat(this.maxLen,"个，已自动截取！")),n.length=this.maxLen),e=n.join(",")}this.visible=!1,this.$emit("submit",e)}}};var c=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("el-dialog",{attrs:{"lock-scroll":!1,title:"批量查询"+e.label,visible:e.visible,"close-on-click-modal":!1,"append-to-body":!0,width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"form",attrs:{"label-width":e.labelWidth}},[r("el-form-item",{attrs:{label:e.label}},[r("el-input",{attrs:{placeholder:"请输入"+e.label,autosize:{minRows:10},clearable:"",type:"textarea"},on:{input:function(){t.$forceUpdate()}},model:{value:e.skuCodes,callback:function(t){e.skuCodes=t},expression:"skuCodes"}})],1),e._v(" "),r("el-form-item",[r("div",{staticStyle:{"font-size":"14px",color:"#666"}},[e._v("\n          备注：一行一个，或英文逗号分隔，最多支持"+e._s(e.maxLen)+"个批量搜索\n        ")])]),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitBtn}},[e._v("\n          确定\n        ")]),e._v(" "),r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("\n          取消\n        ")])],1)],1)],1)],1)};c._withStripped=!0; var u={name:"SlFieldBatchInput",components:{SkuBatchDialog:n({render:c,staticRenderFns:[]},(function(t){t&&t("data-v-e35d5d0c_0",{source:"\n\n/*# sourceMappingURL=skuBatchDialog.vue.map */",map:{version:3,sources:["skuBatchDialog.vue"],names:[],mappings:";;AAEA,6CAA6C",file:"skuBatchDialog.vue"},media:void 0})}),d,"data-v-e35d5d0c",!1,void 0,!1,o,void 0,void 0)},model:{prop:"skuCodes",event:"confirm"},props:{skuCodes:{type:String,default:""},maxLen:{type:Number,default:200},label:{type:String,default:"SKU"},width:{type:Number,default:0},showBatchButton:{type:Boolean,default:!0}},data:function(){return{skuCodesCopy:"",multipleSkuVisible:!1}},watch:{skuCodes:function(t){this.skuCodesCopy=t}},mounted:function(){t.http.get("/srm-common-service/data/name-value/list?dataCode=SUPPLY_TYPE").then((function(t){console.log(t)}))},methods:{handleInput:function(t){this.skuCodesCopy=this.formatLen(this.skuCodesCopy),this.onEmit(this.skuCodesCopy)},multipleSku:function(){this.disabled||this.$refs.skuBatchDialog.show(this.skuCodesCopy)},onSubmit:function(t){this.onEmit(t)},onEmit:function(t){this.$emit("confirm",t)},formatLen:function(t){var e=t.split(",");return e.length>this.maxLen?(this.$message.warning("超出允许输入最大数量".concat(this.maxLen,"个，已自动截取！")),e.length=this.maxLen,e.join(",")):t}}};var h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sku-container",style:{width:t.width?t.width+"px":"100%"}},[n("el-input",{ref:"input",attrs:{placeholder:"请输入"+t.label,clearable:""},on:{input:t.handleInput},model:{value:t.skuCodesCopy,callback:function(e){t.skuCodesCopy=e},expression:"skuCodesCopy"}},[t.showBatchButton?n("el-button",{attrs:{slot:"append",type:"primary"},on:{click:t.multipleSku},slot:"append"},[t._v("\n      批量\n    ")]):t._e()],1),t._v(" "),n("SkuBatchDialog",t._b({ref:"skuBatchDialog",attrs:{maxLen:t.maxLen,label:t.label},on:{submit:t.onSubmit}},"SkuBatchDialog",t.$attrs,!1))],1)};h._withStripped=!0; var m=n({render:h,staticRenderFns:[]},(function(t){t&&t("data-v-2560090a_0",{source:".sku-container[data-v-2560090a] {\n  display: inline-block;\n}\n\n/*# sourceMappingURL=main.vue.map */",map:{version:3,sources:["E:\\code\\font-code\\lerna-repo\\packages\\starlinke-components\\packages\\SlFieldBatchInput\\src\\main.vue","main.vue"],names:[],mappings:"AA+GA;EACA,qBAAA;AC9GA;;AAEA,mCAAmC",file:"main.vue",sourcesContent:['<template>\r\n  <div\r\n    class="sku-container"\r\n    :style="{ width: width ? width + \'px\' : \'100%\' }"\r\n  >\r\n    <el-input\r\n      ref="input"\r\n      v-model="skuCodesCopy"\r\n      :placeholder="`请输入${label}`"\r\n      clearable\r\n      @input="handleInput"\r\n    >\r\n      <el-button\r\n        v-if="showBatchButton"\r\n        slot="append"\r\n        type="primary"\r\n        @click="multipleSku"\r\n      >\r\n        批量\r\n      </el-button>\r\n    </el-input>\r\n    <SkuBatchDialog\r\n      ref="skuBatchDialog"\r\n      :maxLen="maxLen"\r\n      :label="label"\r\n      v-bind="$attrs"\r\n      @submit="onSubmit"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SkuBatchDialog from \'./skuBatchDialog\'\r\nimport { http } from \'starlinke-utils\'\r\n\r\nexport default {\r\n  name: \'SlFieldBatchInput\',\r\n  components: {\r\n    SkuBatchDialog\r\n  },\r\n  model: {\r\n    prop: \'skuCodes\',\r\n    event: \'confirm\'\r\n  },\r\n  props: {\r\n    skuCodes: {\r\n      type: String,\r\n      default: \'\'\r\n    },\r\n    maxLen: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: \'SKU\'\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    showBatchButton: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      skuCodesCopy: \'\',\r\n      multipleSkuVisible: false\r\n    }\r\n  },\r\n  watch: {\r\n    skuCodes(val) {\r\n      this.skuCodesCopy = val\r\n    }\r\n  },\r\n  mounted() {\r\n    http.get(\'/srm-common-service/data/name-value/list?dataCode=SUPPLY_TYPE\').then(res => {\r\n      console.log(res)\r\n    })\r\n  },\r\n  methods: {\r\n    handleInput(value) {\r\n      this.skuCodesCopy = this.formatLen(this.skuCodesCopy)\r\n      this.onEmit(this.skuCodesCopy)\r\n    },\r\n    multipleSku() {\r\n      if (this.disabled) return\r\n      this.$refs.skuBatchDialog.show(this.skuCodesCopy)\r\n    },\r\n    onSubmit(skucode) {\r\n      this.onEmit(skucode)\r\n    },\r\n    onEmit(skuCodes) {\r\n      this.$emit(\'confirm\', skuCodes)\r\n    },\r\n    formatLen(skuCodes) {\r\n      let skuArr = skuCodes.split(\',\')\r\n      if (skuArr.length > this.maxLen) {\r\n        this.$message.warning(`超出允许输入最大数量${this.maxLen}个，已自动截取！`)\r\n        skuArr.length = this.maxLen\r\n        return skuArr.join(\',\')\r\n      }\r\n      return skuCodes\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style lang="scss" scoped>\r\n.sku-container {\r\n  display: inline-block;\r\n}\r\n</style>\r\n',".sku-container {\n  display: inline-block;\n}\n\n/*# sourceMappingURL=main.vue.map */"]},media:void 0})}),u,"data-v-2560090a",!1,void 0,!1,o,void 0,void 0);m.install=function(t){t.component(m.name,m)};var f=[p,m],b=function t(e){t.installed||f.forEach((function(t){e.component(t.name,t)}))};return"undefined"!=typeof window&&window.Vue&&b(window.Vue),{version:"1.0.2",install:b,SlPoper:p,SlFieldBatchInput:m}}));
